/**
 * in-article-ad-tool
 * Generated: 2018-01-08
 * Version: 0.1.0
 */

!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):e.inArticleAdTool=r()}(this,function(){"use strict";var e=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e};function r(e,r){var t={};for(var n in e)r.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}var t=3,n=3,o="p";return{init:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=i.containerSelector,a=r(i,["containerSelector"]);!function(e){var r=e.containerSelector,i=e.elementSelector,c=void 0===i?o:i,a=e.adCode,f=e.firstAppearance,d=void 0===f?t:f,l=e.insertEvery,u=void 0===l?n:l;if("string"!=typeof r)throw new Error("containerSelector should be a String");if("string"!=typeof c)throw new Error("elementSelector should be a String");if("string"!=typeof a&&"function"!=typeof a)throw new Error("adCode should be a String or function");if("number"!=typeof d)throw new Error("firstAppearance should be a Number");if(d<=0)throw new Error("firstAppearance should be > 0");if("number"!=typeof u)throw new Error("insertEvery should be a Number");if(u<0)throw new Error("insertEvery should be >= 0")}(e({containerSelector:c},a)),document.querySelectorAll(c).forEach(function(o,i){return function(o){var i=o.element,c=o.index,a=o.elementSelector,f=r(o,["element","index","elementSelector"]);i.setAttribute("data-in-article-container",c),(d=i.querySelectorAll('[data-in-article-container="'+c+'"] > '+a),Array.from(d.values())).filter(function(r,n){return function(e){e.element;var r=e.index,n=e.firstAppearance,o=void 0===n?t:n;return r+1>=o}(e({element:r,index:n},f))}).filter(function(r,t){return function(e){var r=e.index,t=e.insertEvery,o=void 0===t?n:t;return 0===r||o>0&&r%o==0}(e({index:t},f))}).forEach(function(r,t){!function(e){var r=e.element,t=e.index,n=e.adCode,o=document.createElement("div");"function"==typeof n&&(n=n(r,t)),o.innerHTML=n,o.childNodes.forEach(function(e,t){var n=e.cloneNode(!0);if("SCRIPT"===n.nodeName){var o=n;n=document.createElement("script"),o.src&&(n.src=o.src,n.setAttribute("async",""));var i=document.createTextNode(o.text);n.appendChild(i)}a=n,(c=r).parentNode.insertBefore(a,c);var c,a})}(e({element:r,index:t},f))});var d}(e({element:o,index:i},a))})}}});
